{% extends "base.html" %}

{% block title %}Support - {{ plan_data.get('name', 'Free') }} - EazyBrief{% endblock %}

{% block page_title %}{{ plan_data.get('name', 'Free') }}{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- FAQ Section -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Frequently Asked Questions</h2>
            <div class="space-y-4">
                <div class="border-b border-gray-200 pb-4">
                    <button onclick="toggleFAQ(this)" class="flex justify-between items-center w-full text-left">
                        <span class="text-lg font-medium text-gray-900">How does EazyBrief work?</span>
                        <i class="fas fa-chevron-down text-gray-500"></i>
                    </button>
                    <div class="mt-2 text-gray-600 hidden">
                        EazyBrief is a platform that helps you create professional briefings quickly and efficiently. Just enter your information and our AI will generate a complete and structured briefing.
                    </div>
                </div>

                <div class="border-b border-gray-200 pb-4">
                    <button onclick="toggleFAQ(this)" class="flex justify-between items-center w-full text-left">
                        <span class="text-lg font-medium text-gray-900">What plans are available?</span>
                        <i class="fas fa-chevron-down text-gray-500"></i>
                    </button>
                    <div class="mt-2 text-gray-600 hidden">
                        We offer three plans: Free (3 briefs/month), Pro (50 briefs/month), and Premium (unlimited briefs). Each plan has specific features to meet different needs.
                    </div>
                </div>

                <div class="border-b border-gray-200 pb-4">
                    <button onclick="toggleFAQ(this)" class="flex justify-between items-center w-full text-left">
                        <span class="text-lg font-medium text-gray-900">How can I export my briefs?</span>
                        <i class="fas fa-chevron-down text-gray-500"></i>
                    </button>
                    <div class="mt-2 text-gray-600 hidden">
                        You can export your briefs in various formats: PDF, DOCX, TXT, and HTML. Just access the desired brief and click the export button.
                    </div>
                </div>

                <div class="border-b border-gray-200 pb-4">
                    <button onclick="toggleFAQ(this)" class="flex justify-between items-center w-full text-left">
                        <span class="text-lg font-medium text-gray-900">How does the payment system work?</span>
                        <i class="fas fa-chevron-down text-gray-500"></i>
                    </button>
                    <div class="mt-2 text-gray-600 hidden">
                        We use Stripe as our payment processor. We accept credit and debit cards. The payment is processed securely and you will receive a receipt by email.
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact Form -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Contact Us</h2>
            <form id="contact-form" class="space-y-4">
                <div>
                    <label for="subject" class="block text-sm font-medium text-gray-700">Subject</label>
                    <select id="subject" name="subject" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                        <option value="general">General</option>
                        <option value="technical">Technical Support</option>
                        <option value="billing">Billing</option>
                        <option value="feedback">Feedback</option>
                    </select>
                </div>

                <div>
                    <label for="message" class="block text-sm font-medium text-gray-700">Message</label>
                    <textarea id="message" name="message" rows="4" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea>
                </div>

                <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                    Send Message
                </button>
            </form>
        </div>
    </div>
</div>

<script>
function toggleFAQ(button) {
    const content = button.nextElementSibling;
    const icon = button.querySelector('i');
    
    content.classList.toggle('hidden');
    icon.classList.toggle('fa-chevron-down');
    icon.classList.toggle('fa-chevron-up');
}

document.getElementById('contact-form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = {
        subject: document.getElementById('subject').value,
        message: document.getElementById('message').value
    };

    fetch('/api/contact', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(formData)
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert('Message sent successfully! We will contact you soon.');
            document.getElementById('contact-form').reset();
        } else {
            alert('Error sending message. Please try again.');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Erro ao enviar mensagem. Por favor, tente novamente.');
    });
});
</script>
{% endblock %} 